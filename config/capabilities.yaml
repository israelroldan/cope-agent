# COPE Capability Manifest
# Lightweight discovery layer - triggers map to specialist agents
# ~800 tokens vs ~70k for full MCP tool schemas

version: 1

identity:
  name: Cope
  role: Israel's AI executive assistant
  framework: C.O.P.E. (Clarify, Organise, Prioritise, Execute)

domains:
  email:
    description: "Email management for Tatoma work account"
    triggers:
      - inbox
      - unread
      - email
      - mail
      - send
      - draft
      - reply
      - compose
      - gmail
    specialist: email-agent
    mcp_servers:
      - gmail-work
    vip_senders:
      - Sander Kok
      - Maarten van den Heuvel-Erp
      - Thomas Verhappen
    workflows:
      - InboxDigest
      - SearchEmail
      - ComposeEmail
      - TrackResponses

  calendar:
    description: "Calendar across Work and Home with school constraints"
    triggers:
      - calendar
      - schedule
      - meeting
      - free
      - available
      - event
      - book
      - agenda
    specialist: calendar-agent
    mcp_servers:
      - google-calendar-work
      - ical-home
      - magister
    constraints:
      - "amelie_pickup is HARD constraint on availability"
      - "always check school times before afternoon meetings"
    workflows:
      - DailyAgenda
      - CheckAvailability
      - CreateEvent
      - SuggestTime

  slack:
    description: "Tatoma Slack workspace communication"
    triggers:
      - slack
      - channel
      - message
      - founders
      - team
      - work chat
      - dm
    specialist: slack-agent
    mcp_servers:
      - slack-tatoma
    priority_channels:
      - "#founders-talk"
      - "#product"
      - "#-ai-rollout-project"
    workflows:
      - DailyDigest
      - ChannelCatchup
      - CommitmentScan

  # LifeOS - primary personal operating system (Sanity CMS backend)
  lifeos:
    description: "LifeOS - personal operating system for tasks, goals, projects, inbox, open loops, and decisions"
    triggers:
      - lifeos
      - inbox
      - capture
      - open loop
      - open loops
      - waiting on
      - goals
      - tasks
      - priorities
      - quick add
      - decision
      - decisions
      - decided
      - record decision
      - project
      - projects
      - new project
      - create project
    specialist: lifeos-agent
    backend: sanity
    workflows:
      - QuickCapture
      - TasksToday
      - OpenLoops
      - GoalProgress
      - RecordDecision
      - ProjectStatus

  # Source of truth for Tatoma database IDs and schemas: src/config/tatoma-schema.ts
  notion_work:
    description: "Tatoma work Notion workspace"
    triggers:
      - notion work
      - work docs
      - project page
      - wiki
      - work notion
      - tatoma
      - clients
      - partners
      - playbook
    specialist: notion-work-agent
    mcp_servers:
      - notion-work
    databases:
      clients_projects: "1bbbfa85607e81f19c28cc806fe7a6e5"
      tasks: "1bbbfa85607e80a598cad61fb3bccec1"
      playbook: "2e1bfa85607e803cb830c771f636cee5"
      partners_network: "1bbbfa85607e80d697bbf28bcd2e132f"
    workflows:
      - SearchPages
      - ReadPage
      - CreatePage

  lifelog:
    description: "Omi wearable memories and conversations"
    triggers:
      - lifelog
      - memories
      - what did I say
      - conversations
      - remember
      - recall
      - omi
    specialist: lifelog-agent
    mcp_servers:
      - omi
    workflows:
      - LifelogDigest
      - SearchMemories
      - GetConversations

  school:
    description: "Amelie & Philippe school schedules"
    triggers:
      - school
      - pickup
      - dropoff
      - kids
      - children
      - amelie
      - philippe
      - magister
    specialist: school-agent
    mcp_servers:
      - magister
    constraints:
      - "amelie pickup by Israel - HARD constraint"
      - "philippe pickup by wife unless explicitly mentioned"
    workflows:
      - GetSchedule
      - GetPickupTime
      - GetDropoffTime

  miro:
    description: "Miro boards for diagrams and visual collaboration"
    triggers:
      - miro
      - board
      - diagram
      - whiteboard
      - visual
    specialist: miro-agent
    mcp_servers:
      - miro
    workflows:
      - GetBoardDocs
      - CreateDiagram

  finance:
    description: "Financial coaching and YNAB budget management"
    triggers:
      - finance
      - budget
      - money
      - spending
      - ynab
      - expenses
      - savings
      - accounts
      - balance
      - transaction
      - underfunded
      - overspent
    specialist: finance-agent
    mcp_servers:
      - ynab
    workflows:
      - BudgetReview
      - LogTransaction
      - SpendingAnalysis

  ics_sync:
    description: "ICS credit card transaction sync to YNAB"
    triggers:
      - ics
      - icscards
      - credit card
      - creditcard
      - ics sync
      - sync ics
      - import ics
      - credit card sync
      - sync credit card
      - import credit card
      - ics import
    specialist: ics-sync-agent
    mcp_servers:
      - playwright
      - ynab
    workflows:
      - SyncTransactions

# Multi-domain workflows
workflows:
  # Daily workflows
  daily_briefing:
    description: "Morning routine - school, calendar, email, slack, priorities"
    triggers:
      - briefing
      - "what's on today"
      - "what's happening today"
      - daily briefing
      - morning briefing
      - start my day
      - good morning
      - "today's schedule"
      - "catch me up"
    specialist: cope-workflow-agent
    parallel_tasks:
      - domain: school
        task: "Get dropoff/pickup times and any schedule changes"
      - domain: calendar
        task: "Get today's events from all calendars, flag conflicts"
      - domain: email
        task: "Check inbox, flag VIPs (Sander, Maarten, Thomas)"
      - domain: slack
        task: "Check overnight activity in #founders-talk, #product"
      - domain: lifeos
        task: "Get high priority tasks, active goals, and open loops"
      - domain: lifelog
        task: "Get overnight conversations and memories"

  daily_close:
    description: "End-of-day routine - capture decisions, review progress"
    triggers:
      - done for the day
      - end my day
      - daily close
      - day close
      - close the day
      - wrap up
      - "what'd I do today"
    specialist: cope-workflow-agent
    parallel_tasks:
      - domain: lifeos
        task: "Get today's completed tasks, active tasks, and open loops"
      - domain: lifelog
        task: "Get today's lifelog summary"

  # Weekly workflows
  week_start:
    description: "Monday planning - set priorities and focus for the week"
    triggers:
      - week start
      - start the week
      - monday planning
      - weekly planning
      - "what's this week"
      - set up the week
    specialist: cope-workflow-agent
    parallel_tasks:
      - domain: lifeos
        task: "Get goal progress (P1/P2/P3), active open loops, high priority tasks"
      - domain: calendar
        task: "Get week overview, major commitments"

  week_mid:
    description: "Wednesday check-in - course correct the week"
    triggers:
      - week check
      - mid-week
      - midweek
      - wednesday check
      - how is the week going
      - week progress
    specialist: cope-workflow-agent

  week_end:
    description: "Friday review - wins, learnings, carries"
    triggers:
      - week end
      - end the week
      - weekly review
      - friday review
      - close the week
      - week wrap up
      - "how'd the week go"
      - retrospective
    specialist: cope-workflow-agent
    parallel_tasks:
      - domain: lifeos
        task: "Get completed tasks, goal progress, and items carrying to next week"
      - domain: lifelog
        task: "Get week's lifelog summary"

  # Finance workflows
  budget_review:
    description: "Weekly budget check-in with spending analysis"
    triggers:
      - budget review
      - weekly budget
      - how am I spending
      - budget check
      - spending review
      - check my budget
      - budget status
    specialist: cope-workflow-agent
    parallel_tasks:
      - domain: finance
        task: "Analyze spending vs budget for the week, identify patterns"

  month_close:
    description: "End-of-month financial review and planning"
    triggers:
      - month close
      - monthly close
      - end of month
      - month end review
      - monthly review
      - close the month
      - monthly summary
      - month end
    specialist: cope-workflow-agent
    parallel_tasks:
      - domain: finance
        task: "Complete month-end financial close, analyze trends, plan next month"

  # COPE thinking phases
  clarify:
    description: "COPE Phase 1 - define the real problem"
    triggers:
      - clarify
      - clarify this
      - "what's the real problem"
      - help me think through this
      - problem definition
      - "i'm stuck"
      - "i'm not sure what the problem is"
    specialist: cope-workflow-agent

  organise:
    description: "COPE Phase 2 - map constraints and context"
    triggers:
      - organise
      - organize
      - map the context
      - what are the constraints
      - who are the stakeholders
      - "what's been tried"
      - dependencies
    specialist: cope-workflow-agent

  prioritise:
    description: "COPE Phase 3 - decide what matters now"
    triggers:
      - prioritise
      - prioritize
      - what should I do first
      - too many options
      - everything feels urgent
      - help me decide
      - what matters most
      - rank these
    specialist: cope-workflow-agent

  execute:
    description: "COPE Phase 4 - turn decisions into action"
    triggers:
      - execute
      - what do I do now
      - next action
      - how do I start
      - make it actionable
      - break it down
      - turn this into tasks
    specialist: cope-workflow-agent
